<script>
function toggleDropdown(card) {
  let allCards = document.querySelectorAll(".service-card");
  let isMobile = window.innerWidth <= 768;
  let clickedDropdown = card.querySelector(".service-dropdown");
  let isOpen = clickedDropdown.classList.contains("open");

  allCards.forEach(c => {
    let dropdown = c.querySelector(".service-dropdown");

    if (c === card) {
      dropdown.classList.toggle("open", !isOpen);
    } else {
      dropdown.classList.remove("open");
    }
  });

  if (isMobile) {
    if (!isOpen) {
      // Section clicked → apply transparency to everything beneath
      let allSections = document.querySelectorAll(".service-card");
      let clickedIndex = Array.from(allSections).indexOf(card);

      allSections.forEach((c, idx) => {
        if (idx > clickedIndex) {
          c.classList.add("transparent-below");
        } else {
          c.classList.remove("transparent-below");
        }
      });
    } else {
      // Close dropdown → reset
      document.querySelectorAll(".service-card").forEach(c => {
        c.classList.remove("transparent-below");
      });
    }
  }
}
</script>
<style>
@media (max-width: 768px) {
  .service-card.transparent-below {
    opacity: 0;
    transition: opacity 0.3s ease;
  }
}
</style>
